<meta charSet="utf-8">
<title>relation-graph demo</title>

<script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
<!-- screenfull和html2canvas是relation-graph依赖的两个组件，需要引入 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/screenfull.js/5.1.0/screenfull.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<!-- 引入relation-graph -->
<script src="https://unpkg.com/relation-graph/lib/vue2/relation-graph.umd.js"></script>

<body>
    <div id="app">
        <div style="height:calc(100vh - 30px);width:100%;border:#eeeeee solid 1px;">
            <relation-graph ref="seeksRelationGraph" :options="graphOptions" />
        </div>
    </div>
</body>
<script>
    const app = new Vue({
        el: '#app',
        data() {
            return {
                relationLoading: false,
                currentCase: "双向树",
                //关系图属性配置（重要）
                graphOptions: {
                    layouts: [
                        {
                            label: "中心",
                            layoutName: "tree",   //布局方式（tree树状布局/center中心布局/force自动布局）
                            layoutClassName: "seeks-layout-center",   //当使用这个布局时，会将此样式添加到图谱上
                            defaultJunctionPoint: "border",   //默认的连线与节点接触的方式
                            defaultNodeShape: 0,   //默认的节点形状，0:圆形；1:矩形
                            defaultLineShape: 1,   //默认的线条样式（1:直线/2:样式2/3:样式3/4:折线/5:样式5/6:样式6）
                            centerOffset_y: 130,   //根节点y坐标偏移量（针对项目配置单位为px）
                            min_per_width: 120,   //节点距离限制:节点之间横向距离最小值 60
                            min_per_height: 50,   //节点距离限制:节点之间纵向距离最小值 500
                        },
                    ],
                    defaultNodeShape: 1,    //默认的节点形状，0:圆形；1:矩形
                    defaultExpandHolderPosition: "bottom",  //节点展开关闭的按钮位置
                    defaultLineShape: 4,   //默认的线条样式（1:直线/2:样式2/3:样式3/4:折线/5:样式5/6:样式6）
                    defaultJunctionPoint: "tb", //默认的连线与节点接触的方式（border:边缘/ltrb:上下左右/tb:上下/lr:左右）当布局为树状布局时应使用tb或者lr，这样才会好看
                    defaultNodeBorderWidth: 0.2, //节点边框粗细
                    defaultLineColor: "rgba(0, 186, 189, 1)",    //默认的线条颜色
                    defaultNodeColor: "rgba(0, 206, 209, 1)",    //默认的节点背景颜色
                    defaultNodeWidth: "90", //节点宽度 30 
                    defaultNodeHeight: "80", //节点高度 400
                    defaultFocusRootNode: false,   //默认为根节点添加一个被选中的样式
                    moveToCenterWhenResize: false,   //当图谱的大小发生变化时，是否重新让图谱的内容看起来居中
                },
                __graph_json_data: {},   //节点的数据
            };
        },
        mounted() {
            this.showSeeksGraph();
        },
        methods: {
            //初始化节点数据
            showSeeksGraph(query) {
                this.__graph_json_data = {
                    rootId: "0",    //根节点唯一id
                    nodes: [
                        {
                            id: "0",
                            offset_x: 0,    //根节点位置偏移量
                            text: "XXXXXX股份有限公司",  //节点文本
                            width: 100,     //根节点宽度
                            height: 200,
                            color: "#0084ff",   //根节点背景色
                            fontColor: "#ffffff",   //根节点字体颜色
                            childrenLoaded: true,   //配置标识，点击展开节点按钮时判断，不需要重复请求接口（懒加载数据）
                        },
                        {
                            id: "101",
                            text: "节点1",
                            expandHolderPosition: "top",    //展开节点的显示位置，查看后续效果图
                            width: 100,     //根节点宽度
                            expanded: false,
                            childrenLoaded: false,   //节点重复展开标识
                        },
                        { id: "102", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "103", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "104", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "105", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "106", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "107", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "108", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "109", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "110", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "111", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "112", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "113", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "114", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "115", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "116", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "117", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "141", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "142", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "143", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "144", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "145", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "146", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "147", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "148", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "149", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "151", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "152", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "153", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "154", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "155", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "156", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "157", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "158", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "159", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "160", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "161", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "162", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "163", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "164", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "165", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "166", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "167", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "168", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "169", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "170", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "171", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "172", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "173", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "174", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "175", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "176", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "177", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "178", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "179", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "180", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "181", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "182", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "183", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "184", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "185", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "186", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "187", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "188", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "189", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "190", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "191", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "192", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "193", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "194", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "195", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "196", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "197", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "198", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                        { id: "199", text: "北京智慧科技有限公司一分公司凑字数公司", expandHolderPosition: "bottom" },
                    ],
                    links: [
                        //根节点上方侧的关系数据，注意关系的方向，是从 节点--->根节点：
                        { from: "101", to: "0", text: "出资100%" },    //上方（从子节点出发到根节点）
                        { from: "0", to: "102", text: "出资100%" },   //下方（从根节点出发到子节点）
                        { from: "0", to: "103", text: "出资100%" },
                        { from: "0", to: "104", text: "出资100%" },
                        { from: "0", to: "105", text: "出资100%" },
                        { from: "0", to: "106", text: "出资100%" },
                        { from: "0", to: "107", text: "出资100%" },
                        { from: "0", to: "108", text: "出资100%" },
                        { from: "0", to: "109", text: "出资100%" },
                        { from: "0", to: "110", text: "出资100%" },
                        { from: "0", to: "111", text: "出资100%" },
                        { from: "0", to: "112", text: "出资100%" },
                        { from: "0", to: "113", text: "出资100%" },
                        { from: "0", to: "114", text: "出资100%" },
                        { from: "0", to: "115", text: "出资100%" },
                        { from: "0", to: "116", text: "出资100%" },
                        { from: "0", to: "117", text: "出资100%" },
                        { from: "0", to: "140", text: "出资100%" },
                        { from: "0", to: "141", text: "出资100%" },
                        { from: "0", to: "142", text: "出资100%" },
                        { from: "0", to: "143", text: "出资100%" },
                        { from: "0", to: "144", text: "出资100%" },
                        { from: "0", to: "145", text: "出资100%" },
                        { from: "0", to: "146", text: "出资100%" },
                        { from: "0", to: "147", text: "出资100%" },
                        { from: "0", to: "148", text: "出资100%" },
                        { from: "0", to: "149", text: "出资100%" },
                        { from: "0", to: "150", text: "出资100%" },
                        { from: "0", to: "151", text: "出资100%" },
                        { from: "0", to: "152", text: "出资100%" },
                        { from: "0", to: "153", text: "出资100%" },
                        { from: "0", to: "154", text: "出资100%" },
                        { from: "0", to: "155", text: "出资100%" },
                        { from: "0", to: "156", text: "出资100%" },
                        { from: "0", to: "157", text: "出资100%" },
                        { from: "0", to: "158", text: "出资100%" },
                        { from: "0", to: "159", text: "出资100%" },
                        { from: "154", to: "160", text: "出资100%" },
                        { from: "154", to: "161", text: "出资100%" },
                        { from: "154", to: "162", text: "出资100%" },
                        { from: "154", to: "163", text: "出资100%" },
                        { from: "154", to: "164", text: "出资100%" },
                        { from: "154", to: "165", text: "出资100%" },
                        { from: "154", to: "166", text: "出资100%" },
                        { from: "154", to: "167", text: "出资100%" },
                        { from: "154", to: "168", text: "出资100%" },
                        { from: "154", to: "169", text: "出资100%" },
                        { from: "154", to: "170", text: "出资100%" },
                        { from: "154", to: "171", text: "出资100%" },
                        { from: "154", to: "172", text: "出资100%" },
                        { from: "154", to: "173", text: "出资100%" },
                        { from: "154", to: "174", text: "出资100%" },
                        { from: "154", to: "175", text: "出资100%" },
                        { from: "154", to: "176", text: "出资100%" },
                        { from: "154", to: "177", text: "出资100%" },
                        { from: "154", to: "178", text: "出资100%" },
                        { from: "154", to: "179", text: "出资100%" },
                        { from: "177", to: "180", text: "出资100%" },
                        { from: "177", to: "181", text: "出资100%" },
                        { from: "177", to: "182", text: "出资100%" },
                        { from: "177", to: "183", text: "出资100%" },
                        { from: "177", to: "184", text: "出资100%" },
                        { from: "177", to: "185", text: "出资100%" },
                        { from: "177", to: "186", text: "出资100%" },
                        { from: "177", to: "187", text: "出资100%" },
                        { from: "177", to: "188", text: "出资100%" },
                        { from: "177", to: "189", text: "出资100%" },
                        { from: "167", to: "190", text: "出资100%" },
                        { from: "167", to: "191", text: "出资100%" },
                        { from: "167", to: "192", text: "出资100%" },
                        { from: "167", to: "193", text: "出资100%" },
                        { from: "167", to: "194", text: "出资100%" },
                        { from: "167", to: "195", text: "出资100%" },
                        { from: "167", to: "196", text: "出资100%" },
                        { from: "167", to: "197", text: "出资100%" },
                        { from: "167", to: "198", text: "出资100%" },
                        { from: "167", to: "199", text: "出资100%" },

                    ],
                };
                //将根节点渲染进图谱中
                this.$refs.seeksRelationGraph.setJsonData(this.__graph_json_data, (seeksRGGraph) => {
                    this.shareholdersData();
                }
                );
            },
        },
    })
</script>

<style>
    .my-node-class {
        width: 260px;
    }
</style>